# Схема базы данных для чек-листов

Чек-листы позволяют пользователю выбрать параметр, тип (например, "Ленточные фундаменты"), подтип (например, "Бетон") и заполнить спецификации (например, "Глубина заложения"). Связаны с вопросами экспертизы через `checklist_instances` и включают вводную часть из `checklist_group_descriptions`.

## Таблицы

### Checklists (Чек-листы)
Хранит категории чек-листов.

| Поле         | Тип         | Описание                              |
|--------------|-------------|---------------------------------------|
| `id`         | UUID        | Уникальный идентификатор чек-листа    |
| `name`       | VARCHAR(255)| Название чек-листа (обязательно)      |
| `description`| TEXT        | Описание чек-листа (опционально)      |

**Пример данных:**

| id                                   | name       | description                        |
|--------------------------------------|------------|------------------------------------|
| 550e8400-e29b-41d4-a716-446655440000 | Полы       | Описание полов в конструкции       |
| 550e8400-e29b-41d4-a716-446655440001 | Стены      | Описание стен в конструкции        |

---

### ChecklistGroupDescriptions (Вводная часть чек-листа)
Хранит вводную часть для чек-листа и вопроса.

| Поле                  | Тип         | Описание                              |
|-----------------------|-------------|---------------------------------------|
| `id`                  | UUID        | Уникальный идентификатор              |
| `expertise_question_id` | UUID        | Ссылка на `expertise_question`        |
| `checklist_id`        | UUID        | Ссылка на `checklists`                |
| `description`         | TEXT        | Вводная часть (например, "Адрес")     |
| `created_at`          | TIMESTAMP   | Дата создания                         |

**Пример данных:**

| id                                   | expertise_question_id                | checklist_id                         | description          | created_at          |
|--------------------------------------|--------------------------------------|--------------------------------------|----------------------|---------------------|
| 550e8400-e29b-41d4-a716-446655440010 | 550e8400-e29b-41d4-a716-446655440050 | 550e8400-e29b-41d4-a716-446655440000 | Адрес: ул. Ленина, 10 | 2025-04-07 10:00:00 |

---

### Parameters (Параметры)
Хранит параметры чек-листов.

| Поле          | Тип         | Описание                              |
|---------------|-------------|---------------------------------------|
| `id`          | UUID        | Уникальный идентификатор параметра    |
| `name`        | VARCHAR(255)| Название параметра (обязательно)      |

**Пример данных:**

| id                                   | name       |
|--------------------------------------|------------|
| 550e8400-e29b-41d4-a716-446655440020 | Полы       |
| 550e8400-e29b-41d4-a716-446655440021 | Стены      |

---

### ChecklistParameters (Связь чек-листов и параметров)
Связывает чек-листы с параметрами.

| Поле          | Тип         | Описание                              |
|---------------|-------------|---------------------------------------|
| `id`          | UUID        | Уникальный идентификатор связи        |
| `checklist_id`| UUID        | Ссылка на `checklists`                |
| `parameter_id`| UUID        | Ссылка на `parameters`                |

**Пример данных:**

| id                                   | checklist_id                         | parameter_id                         |
|--------------------------------------|--------------------------------------|--------------------------------------|
| 550e8400-e29b-41d4-a716-446655440030 | 550e8400-e29b-41d4-a716-446655440000 | 550e8400-e29b-41d4-a716-446655440020 |

---

### ParameterTypes (Типы параметров)
Хранит типы для параметров.

| Поле          | Тип         | Описание                              |
|---------------|-------------|---------------------------------------|
| `id`          | UUID        | Уникальный идентификатор типа         |
| `parameter_id`| UUID        | Ссылка на `parameters`                |
| `name`        | VARCHAR(255)| Название типа (например, "Ленточные фундаменты") |

**Пример данных:**

| id                                   | parameter_id                         | name                  |
|--------------------------------------|--------------------------------------|-----------------------|
| 550e8400-e29b-41d4-a716-446655440040 | 550e8400-e29b-41d4-a716-446655440020 | Ленточные фундаменты  |
| 550e8400-e29b-41d4-a716-446655440041 | 550e8400-e29b-41d4-a716-446655440020 | Плиты                 |

---

### Subtypes (Подтипы)
Хранит подтипы для типов.

| Поле              | Тип         | Описание                              |
|-------------------|-------------|---------------------------------------|
| `id`              | UUID        | Уникальный идентификатор подтипа      |
| `parameter_type_id` | UUID        | Ссылка на `parameter_types`           |
| `name`            | VARCHAR(255)| Название подтипа (например, "Бетон")  |

**Пример данных:**

| id                                   | parameter_type_id                    | name       |
|--------------------------------------|--------------------------------------|------------|
| 550e8400-e29b-41d4-a716-446655440050 | 550e8400-e29b-41d4-a716-446655440040 | Бетон      |
| 550e8400-e29b-41d4-a716-446655440051 | 550e8400-e29b-41d4-a716-446655440040 | Кирпич     |

---

### ParameterSpecs (Спецификации параметров)
Хранит параметры для заполнения.

| Поле         | Тип         | Описание                              |
|--------------|-------------|---------------------------------------|
| `id`         | UUID        | Уникальный идентификатор спецификации |
| `name`       | VARCHAR(255)| Название (например, "Глубина заложения") |
| `unit`       | VARCHAR(50) | Единица измерения (например, "мм")    |
| `is_required`| BOOLEAN     | Обязателен ли параметр                |

**Пример данных:**

| id                                   | name               | unit | is_required |
|--------------------------------------|--------------------|------|-------------|
| 550e8400-e29b-41d4-a716-446655440060 | Глубина заложения  | мм   | true        |
| 550e8400-e29b-41d4-a716-446655440061 | Ширина             | мм   | true        |

---

### ParameterTypeSpecs (Связь типов и спецификаций)
Связывает типы с параметрами и хранит значения по умолчанию.

| Поле              | Тип         | Описание                              |
|-------------------|-------------|---------------------------------------|
| `id`              | UUID        | Уникальный идентификатор связи        |
| `parameter_type_id` | UUID        | Ссылка на `parameter_types`           |
| `spec_id`         | UUID        | Ссылка на `parameter_specs`           |
| `default_value`   | VARCHAR(255)| Значение по умолчанию (например, ГОСТ)|

**Пример данных:**

| id                                   | parameter_type_id                    | spec_id                              | default_value                        |
|--------------------------------------|--------------------------------------|--------------------------------------|--------------------------------------|
| 550e8400-e29b-41d4-a716-446655440070 | 550e8400-e29b-41d4-a716-446655440040 | 550e8400-e29b-41d4-a716-446655440060 | NULL                                 |
| 550e8400-e29b-41d4-a716-446655440071 | 550e8400-e29b-41d4-a716-446655440040 | 550e8400-e29b-41d4-a716-446655440061 | СП 22.13330.2016                     |

---

### ChecklistInstances (Экземпляры чек-листов)
Хранит конкретный выбор пользователя.

| Поле                  | Тип         | Описание                              |
|-----------------------|-------------|---------------------------------------|
| `id`                  | UUID        | Уникальный идентификатор экземпляра   |
| `checklist_id`        | UUID        | Ссылка на `checklists`                |
| `parameter_id`        | UUID        | Ссылка на `parameters`                |
| `parameter_type_id`   | UUID        | Ссылка на `parameter_types`           |
| `subtype_id`          | UUID        | Ссылка на `subtypes` (опционально)    |
| `expertise_question_id` | UUID        | Ссылка на `expertise_question`        |
| `created_at`          | TIMESTAMP   | Дата создания                         |

**Пример данных:**

| id                                   | checklist_id                         | parameter_id                         | parameter_type_id                    | subtype_id                           | expertise_question_id                | created_at          |
|--------------------------------------|--------------------------------------|--------------------------------------|--------------------------------------|--------------------------------------|--------------------------------------|---------------------|
| 550e8400-e29b-41d4-a716-446655440080 | 550e8400-e29b-41d4-a716-446655440000 | 550e8400-e29b-41d4-a716-446655440020 | 550e8400-e29b-41d4-a716-446655440040 | 550e8400-e29b-41d4-a716-446655440050 | 550e8400-e29b-41d4-a716-446655440090 | 2025-04-07 10:00:00 |

---

### SpecValues (Значения спецификаций)
Хранит данные, введенные пользователем.

| Поле                  | Тип         | Описание                              |
|-----------------------|-------------|---------------------------------------|
| `id`                  | UUID        | Уникальный идентификатор значения     |
| `checklist_instance_id` | UUID        | Ссылка на `checklist_instances`       |
| `spec_id`             | UUID        | Ссылка на `parameter_specs`           |
| `value`               | VARCHAR(255)| Значение, введенное пользователем     |

**Пример данных:**

| id                                   | checklist_instance_id                | spec_id                              | value  |
|--------------------------------------|--------------------------------------|--------------------------------------|--------|
| 550e8400-e29b-41d4-a716-4466554400A0 | 550e8400-e29b-41d4-a716-446655440080 | 550e8400-e29b-41d4-a716-446655440060 | 1500   |
| 550e8400-e29b-41d4-a716-4466554400A1 | 550e8400-e29b-41d4-a716-446655440080 | 550e8400-e29b-41d4-a716-446655440061 | 1000   |
